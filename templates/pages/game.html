{% extends "pages/page.html" %}
{% load connect_four_tags dajaxice_templatetags %}
{% spaceless %}
{% block extra_js %}
<script type="text/javascript"
        src="{{ STATIC_URL }}connect_four/js/jquery-1.9.1.min.js"></script>
{% dajaxice_js_import %}
<script type="text/javascript">
$(document).ready( function () {
    function chip_over() {
        $('.col' + $(this).data('col')).addClass('highlighted');
    }
    function chip_out() {
        $('.col' + $(this).data('col')).removeClass('highlighted');
    }
    function chip_click() {

    }

    var $chip = $('div.chip');
    $chip.hover(chip_over, chip_out);
    $chip.on('click', chip_click)
});
</script>
{% endblock %}

{% block extra_css %}
<style>
div.board {
    width: {{ game.width_in_pixels }}px;
    height: {{ game.height_in_pixels }}px;
    position: relative;
    background-image: url("{{ STATIC_URL }}connect_four/img/connect4Board.gif");
}
div.chip {
    position: absolute;
    width: {{ CHIP_WIDTH }}px;
    height: {{ CHIP_HEIGHT }}px;
}
div.chip.highlighted {
    background-color: khaki;
}
</style>
{% endblock %}

{% block main %}
{#<img src="{{ STATIC_URL }}connect_four/img/connect4Board.gif"/>#}
<div id="board" class="board">
{% for row in game.get_state %}
    {% for chip in row %}
        <div
            id="{{ chip.id }}"
            class="chip row{{ chip.row }} col{{ chip.col }}"
            style="margin-left: {{ chip.margin_left }}px;
                   margin-top: {{ chip.margin_top }}px;"
            data-row="{{ chip.row }}" data-col="{{ chip.col }}"
            >
        </div>
{#        <script type="text/javascript">#}
{#        $('#{{ chip.id }}').data()#}
{#        </script>#}
    {% endfor %}
{% endfor %}
</div>
{% endblock %}
{% endspaceless %}